---
import type { ImageMetadata } from "astro";
import { getCollection, getEntry } from "astro:content";
import { Image } from "astro:assets";

// const members = await getCollection("members");
const omforeningen = await getEntry("omforeningenpage", "index");
---

<section class="mx-auto grid">
  <h1 class="text-3xl font-semibold leading-snug tracking-tight">Medlemmar</h1>
  <div
    class="mx-auto flex w-full flex-wrap justify-center gap-16 pt-14 xl:justify-start">
    {
      omforeningen.data.members.map(
        async ({ name, title, image, description, email }) => {
          const img = (await import(image)).default as ImageMetadata;
          return (
            <div class="mb-12 flex max-w-64 flex-col justify-between rounded-md border">
              <div>
                <Image
                  class="aspect-square object-cover"
                  src={img}
                  alt={`Bild pÃ¥ ${name}`}
                />
                <h2 class="px-3 pt-3 text-2xl font-semibold leading-snug tracking-tight">
                  {name}
                </h2>
                <p class="px-3 pt-3 font-semibold">{title}</p>
                <p class="px-3 pt-3">{description}</p>
              </div>

              <p class="px-3 pt-3">{email}</p>
            </div>
          );
        },
      )
    }
  </div>
</section>
