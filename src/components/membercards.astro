---
import type { ImageMetadata } from "astro";
import { getCollection } from "astro:content";
import { Image } from "astro:assets";

const members = await getCollection("members");
---

<section class="mx-auto grid max-w-6xl">
  <h1 class="text-4xl font-bold">Medlemmar</h1>
  <div
    class="mx-auto flex w-full flex-wrap justify-center gap-10 pt-14 xl:max-w-6xl xl:justify-start">
    {
      // [members, members, members, members]
      //   .flat()

      members.map(async ({ data: { name, title, image, description } }) => {
        const img = (await import(image)).default as ImageMetadata;
        return (
          <div class="max-w-64">
            <Image
              class="aspect-square object-cover"
              src={img}
              alt={`Bild pÃ¥ ${name}`}
            />

            <div class="flex h-full flex-col">
              <h2 class="flex justify-center py-4 text-3xl font-semibold leading-snug tracking-tight">
                {name}
              </h2>
              <p class="pt-4">{title}</p>
              <p class="pt-3">{description}</p>
            </div>
          </div>
        );
      })
    }
  </div>
</section>
